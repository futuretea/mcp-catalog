name: PostgreSQL
shortDescription: 分析性能、优化查询和调优 PostgreSQL 数据库，并进行健康检查
description: '[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

  [![PyPI - Version](https://img.shields.io/pypi/v/postgres-mcp)](https://pypi.org/project/postgres-mcp/)

  [![Contributors](https://img.shields.io/github/contributors/crystaldba/postgres-mcp)](https://github.com/crystaldba/postgres-mcp/graphs/contributors)


  一个专为深度 SQL 性能分析和优化而设计的模型上下文协议（MCP）服务器。它提供高级索引调优、工作负载感知查询洞察、安全执行控制和基于模式的 SQL 生成——以全面的数据库健康诊断和 EXPLAIN 计划模拟为支撑。


  ## 功能特性

  - **数据库健康分析**：全面的健康检查，包括索引健康、连接利用率、缓冲区分析、真空健康和复制延迟监控

  - **高级索引调优**：使用经过验证的优化技术探索数千种可能索引的工业级算法

  - **查询性能优化**：EXPLAIN 计划分析和假设索引模拟以验证性能

  - **模式智能**：基于详细数据库模式理解的上下文感知 SQL 生成

  - **安全 SQL 执行**：可配置的访问控制，支持只读模式和 SQL 解析，适用于开发和生产环境

  - **工作负载分析**：识别资源密集型查询并提供针对性的优化建议


  ## 连接所需条件


  **必需：**

  - **数据库 URI**：PostgreSQL 连接字符串（例如 `postgresql://username:password@localhost:5432/dbname`）


  ## 使用示例


  - "检查我的数据库健康状况并识别任何问题"

  - "我的数据库中哪些查询最慢？如何加速？"

  - "分析我的数据库工作负载并提议优化性能的索引"

  - "帮我优化这个查询：SELECT * FROM orders JOIN customers ON orders.customer_id = customers.id WHERE orders.created_at > ''2023-01-01''"


  ## 已知问题


  某些工具需要在目标 PostgreSQL 实例中安装扩展：

  - `get_top_queries` 需要 `pg_stat_statements` 扩展

  - `analyze_workload_indexes` 和 `analyze_query_indexes` 需要 `hypopg` 扩展

  '
metadata:
  categories: Databases
icon: https://avatars.githubusercontent.com/u/177543?s=48&v=4
repoURL: https://github.com/crystaldba/postgres-mcp
env:
- key: DATABASE_URI
  name: 数据库 URI
  required: true
  sensitive: false
  description: Postgres 数据库的连接字符串；例如 "postgresql://username:password@localhost:5432/dbname"
toolPreview:
- name: list_schemas
  description: 列出 PostgreSQL 实例中所有可用的数据库模式
- name: list_objects
  description: 列出指定模式中的数据库对象（表、视图、序列、扩展）
- name: get_object_details
  description: 提供特定数据库对象的详细信息，包括列、约束和索引
- name: execute_sql
  description: 在受限模式下执行 SQL 语句，具有只读限制
- name: explain_query
  description: 显示 SQL 查询的执行计划，可以模拟假设索引
- name: get_top_queries
  description: 根据 pg_stat_statements 的执行统计信息报告最慢的 SQL 查询
- name: analyze_workload_indexes
  description: 分析数据库工作负载以识别资源密集型查询，并推荐最优索引
- name: analyze_query_indexes
  description: 分析特定 SQL 查询（最多 10 个）并推荐最优索引
- name: analyze_db_health
  description: 执行全面的健康检查，包括缓存命中率、连接、索引和真空状态
runtime: containerized
containerizedConfig:
  image: ghcr.io/obot-platform/mcp-images/postgresql:0.3.0
  port: 8099
  path: /
  args:
  - postgres-mcp
  - --access-mode=unrestricted
