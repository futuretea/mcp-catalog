name: Neon Database
shortDescription: 使用自然语言、分支和迁移功能管理 Neon Postgres 数据库
description: |
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://neon.com/brand/neon-logo-dark-color.svg">
    <source media="(prefers-color-scheme: light)" srcset="https://neon.com/brand/neon-logo-light-color.svg">
    <img width="250px" alt="Neon Logo fallback" src="https://neon.com/brand/neon-logo-dark-color.svg">
  </picture>

  [![npm version](https://img.shields.io/npm/v/@neondatabase/mcp-server-neon)](https://www.npmjs.com/package/@neondatabase/mcp-server-neon)
  [![npm downloads](https://img.shields.io/npm/dt/@neondatabase/mcp-server-neon)](https://www.npmjs.com/package/@neondatabase/mcp-server-neon)
  [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

  一个 Model Context Protocol (MCP) 服务器，让您可以使用自然语言与 Neon Postgres 数据库进行交互。它基于 Model Context Protocol 构建，充当自然语言请求与 Neon API 之间的桥梁，无需复杂的 SQL 或直接 API 调用即可实现无缝的数据库管理。

  ## 功能特性
  - **自然语言交互**：使用直观、对话式的命令管理 Neon 数据库
  - **项目与分支管理**：创建、删除和管理 Neon 项目及具有分支功能的分支
  - **SQL 查询执行**：运行单个查询或事务，并提供性能分析和优化
  - **数据库迁移**：通过临时分支测试和回滚功能实现安全的模式变更
  - **性能优化**：查询调优、执行计划和慢查询识别
  - **可访问性**：让具有不同技术背景的用户都能与数据库交互

  ## 连接所需信息

  **必需：**
  - **Neon 账户**：活跃的 Neon 账户（在 [console.neon.tech](https://console.neon.tech/signup) 注册）

  ## 使用示例

  - "Let's create a new Postgres database, and call it 'my-database'. Let's then create a table called users with columns: id, name, email, and password."
  - "I want to run a migration on my project 'my-project' that alters the users table to add a 'created_at' column."
  - "Can you give me a summary of all of my Neon projects and what data is in each one?"

metadata:
  categories: Databases
icon: https://avatars.githubusercontent.com/u/183852044?v=4
repoURL: https://github.com/neondatabase/mcp-server-neon
runtime: remote
remoteConfig:
  fixedURL: https://mcp.neon.tech/mcp

toolPreview:
  - name: list_projects
    description: 列出您账户中的前 10 个 Neon 项目。如果找不到项目，请通过向 limit 参数传递更高的值来增加限制。
    params:
      cursor: 可选的分页游标
      limit: 返回的最大项目数（默认 10）
      org_id: 用于筛选项目的可选组织 ID
      search: 用于筛选项目的可选搜索字符串
  - name: create_project
    description: 创建一个新的 Neon 项目。如果有人尝试创建数据库，请使用此工具。
    params:
      name: 新项目的名称
      org_id: 可选的组织 ID
  - name: delete_project
    description: 删除一个 Neon 项目
    params:
      projectId: 要删除的项目 ID
  - name: describe_project
    description: 描述一个 Neon 项目
    params:
      projectId: 要描述的项目 ID
  - name: run_sql
    description: 对 Neon 数据库执行单个 SQL 语句。如果您有之前步骤中的临时分支，除非明确告知，否则必须将分支 ID 传递给此工具。
    params:
      branchId: 要执行 SQL 的分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
      sql: 要执行的 SQL 语句
  - name: run_sql_transaction
    description: 对 Neon 数据库执行 SQL 事务，应用于多个 SQL 语句。如果您有之前步骤中的临时分支，必须将分支 ID 传递给此工具。
    params:
      branchId: 要执行事务的分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
      sqlStatements: 要在事务中执行的 SQL 语句数组
  - name: describe_table_schema
    description: 描述 Neon 数据库中表的结构
    params:
      branchId: 分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
      tableName: 要描述的表名称
  - name: get_database_tables
    description: 获取 Neon 数据库中的所有表
    params:
      branchId: 分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
  - name: create_branch
    description: 在 Neon 项目中创建一个分支
    params:
      branchName: 新分支的名称
      projectId: 项目 ID
  - name: prepare_database_migration
    description: 通过自动生成和执行 DDL 语句执行数据库模式迁移。创建临时分支，应用迁移 SQL，并返回迁移详情以供验证。
    params:
      databaseName: 数据库名称
      migrationSql: 要执行的迁移 SQL
      projectId: 项目 ID
  - name: complete_database_migration
    description: 当用户确认迁移已准备好应用到主分支时完成数据库迁移。同时删除由 prepare_database_migration 创建的临时分支。
    params:
      migrationId: 来自 prepare_database_migration 的迁移 ID
  - name: describe_branch
    description: 获取分支中所有对象的树状视图，包括数据库、模式、表、视图和函数
    params:
      branchId: 要描述的分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
  - name: delete_branch
    description: 从 Neon 项目中删除一个分支
    params:
      branchId: 要删除的分支 ID
      projectId: 项目 ID
  - name: get_connection_string
    description: 获取 Neon 数据库的 PostgreSQL 连接字符串，所有参数均为可选
    params:
      branchId: 可选的分支 ID
      computeId: 可选的计算资源 ID
      databaseName: 可选的数据库名称
      projectId: 可选的项目 ID
      roleName: 可选的角色名称
  - name: provision_neon_auth
    description: 通过与 Stack Auth 集成创建身份验证，为 Neon 项目配置身份验证。设置包括用户表和凭证在内的身份验证基础设施。
    params:
      database: 可选的数据库名称（默认 neondb 或第一个可用的）
      projectId: 要配置身份验证的项目 ID
  - name: explain_sql_statement
    description: 通过在数据库中运行 EXPLAIN (ANALYZE...) 来描述 SQL 语句的 PostgreSQL 查询执行计划
    params:
      analyze: 是否在 explain 中包含 ANALYZE
      branchId: 分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
      sql: 要解释的 SQL 语句
  - name: prepare_query_tuning
    description: 通过分析执行计划并提供优化建议来帮助提高 PostgreSQL 查询性能。创建临时分支进行测试并提供调优建议。
    params:
      databaseName: 数据库名称
      projectId: 项目 ID
      roleName: 连接的角色名称
      sql: 要优化的 SQL 查询
  - name: complete_query_tuning
    description: 通过将更改应用到主分支或丢弃它们来完成查询调优会话。必须在 prepare_query_tuning 之后调用以进行适当的清理。
    params:
      applyChanges: 是否应用建议的更改
      branchId: 要应用更改的主分支 ID
      databaseName: 数据库名称
      projectId: 项目 ID
      roleName: 连接的角色名称
      shouldDeleteTemporaryBranch: 是否删除临时分支
      suggestedSqlStatements: 建议的 SQL 语句数组
      temporaryBranchId: 来自 prepare_query_tuning 的临时分支 ID
      tuningId: 来自 prepare_query_tuning 的调优 ID
  - name: list_slow_queries
    description: 使用 pg_stat_statements 扩展从 Neon 数据库中列出慢查询。返回按执行时间排序的查询，最慢的查询排在最前面。
    params:
      branchId: 分支 ID
      computeId: 计算资源 ID
      databaseName: 数据库名称
      limit: 返回的最大查询数
      minExecutionTime: 最小执行时间阈值
      projectId: 项目 ID
  - name: list_branch_computes
    description: 列出项目或特定分支的计算端点
    params:
      branchId: 分支 ID
      projectId: 项目 ID
  - name: list_organizations
    description: 列出当前用户有权访问的所有组织。可以使用 search 参数按组织名称或 ID 进行筛选。
    params:
      search: 用于筛选组织的可选搜索字符串
